(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{1581:(e,a,r)=>{Promise.resolve().then(r.bind(r,7947))},7947:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>n});var s=r(5155),t=r(2115),l=r(2619),d=r.n(l);function n(){let[e,a]=(0,t.useState)([]),[r,l]=(0,t.useState)("我生日阳历1989年1月17日，23时20分，请给我分析四柱"),[n,i]=(0,t.useState)(!1),[o]=(0,t.useState)(()=>"session-"+Math.random().toString(36).substring(2,15)),c=async()=>{if(!r.trim()||n)return;let s=[...e,{role:"user",content:r}];a(s),l(""),i(!0);try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:s,sessionId:o})});if(!e.ok)throw Error("API error: ".concat(e.status));let r=await e.json(),t={role:"assistant",content:r.response||r.message||JSON.stringify(r)};a([...s,t])}catch(e){a([...s,{role:"assistant",content:"Error: ".concat(e.message,". Please check your API URL and try again."),error:!0}])}finally{i(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col h-screen bg-gradient-to-b from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:[(0,s.jsx)("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(d(),{href:"/",className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Teller"}),(0,s.jsxs)("nav",{className:"flex space-x-1",children:[(0,s.jsx)(d(),{href:"/paipan",className:"px-6 py-2 rounded-lg font-medium transition-all text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:"排盘"}),(0,s.jsx)(d(),{href:"/chat",className:"px-6 py-2 rounded-lg font-medium transition-all bg-blue-500 text-white shadow-md",children:"对话"})]})]})})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto px-4 py-6",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto space-y-4",children:[0===e.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCAC"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"开始对话"}),(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"在下方输入消息并点击发送"})]}),e.map((e,a)=>(0,s.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,s.jsx)("div",{className:"max-w-[80%] rounded-2xl px-4 py-3 ".concat("user"===e.role?"bg-blue-500 text-white":e.error?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300":"bg-white dark:bg-gray-700 text-gray-900 dark:text-white"),children:(0,s.jsx)("p",{className:"whitespace-pre-wrap break-words",children:e.content})})},a)),n&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-white dark:bg-gray-700 rounded-2xl px-4 py-3",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})})})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 px-4 py-4",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto flex gap-2",children:[(0,s.jsx)("textarea",{value:r,onChange:e=>l(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),c())},placeholder:"输入您的消息...",rows:1,className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",style:{maxHeight:"120px"}}),(0,s.jsx)("button",{onClick:c,disabled:n||!r.trim(),className:"px-6 py-3 bg-blue-500 text-white rounded-xl font-medium hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"发送"})]})})]})}}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=1581)),_N_E=e.O()}]);